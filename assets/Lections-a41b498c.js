import{m as L,u as x,_ as g,o as n,c as i,a as s,t as C,b as _,w as h,h as f,i as k,g as r,F as m,r as d,j as v,k as b,l as A}from"./index-a675c8ae.js";import{M as $}from"./Modal-cf688ad3.js";import{L as w}from"./Loader-ca4ead24.js";const D={name:"LectionCard",props:{lection:Object},emits:["handleDelete"],components:{Modal:$},data(){return{isActive:!1}},computed:{...L(x,{user:"authUser"})}},T={class:"card card-equal-height"},M={class:"card-image"},V={class:"image is-3by2"},B=["src"],H={class:"card-content"},N={class:"content"},S={class:"title is-5"},j=["innerHTML"],z={class:"card-footer"};function E(e,t,a,y,o,p){const l=d("router-link"),u=d("modal");return n(),i(m,null,[s("div",T,[s("div",M,[s("figure",V,[s("img",{src:"https://bakalarka-production.up.railway.app"+a.lection.image,alt:"Placeholder image"},null,8,B)])]),s("div",H,[s("div",N,[s("h3",S,C(this.lection.title),1),s("p",{innerHTML:this.lection.content.substring(0,150)+"..."},null,8,j)])]),s("footer",z,[_(l,{to:{name:"Lection",params:{id:this.lection.id}},class:"card-footer-item has-text-primary"},{default:h(()=>[f(" Začať lekciu ")]),_:1},8,["to"]),e.user&&e.user.is_admin?(n(),k(l,{key:0,to:{name:"LectionEdit",params:{id:this.lection.id}},class:"card-footer-item"},{default:h(()=>[f("Upraviť")]),_:1},8,["to"])):r("",!0),e.user&&e.user.is_admin?(n(),i("a",{key:1,onClick:t[0]||(t[0]=c=>o.isActive=!0),class:"card-footer-item has-text-danger"}," Vymazať ")):r("",!0)])]),_(u,{isActive:o.isActive,onCloseModal:t[1]||(t[1]=c=>o.isActive=!1),onDelete:t[2]||(t[2]=c=>this.$emit("handleDelete",this.lection.id))},null,8,["isActive"])],64)}const F=g(D,[["render",E],["__scopeId","data-v-0426632c"]]),I={name:"Lections",components:{LectionCard:F,Loader:w},data(){return{lections:[],loading:!1,toast:null}},mounted(){this.loading=!0,v.get("/api/lections").then(e=>{this.lections=e.data}).finally(()=>this.loading=!1),this.toast=b()},methods:{deleteLection(e){v.delete("api/lections/"+e).then(a=>{this.showToast()});const t=this.lections.findIndex(a=>a.id===e);t!==-1&&this.lections.splice(t,1)},showToast(){this.toast.warning("Lekcia bola úspešne vymazaná",{timeout:3e3,position:"top-center"})}}},U={key:1,class:"title has-text-centered"},Z={class:"columns is-multiline"};function q(e,t,a,y,o,p){const l=d("loader"),u=d("lection-card");return n(),i(m,null,[o.loading?(n(),k(l,{key:0})):r("",!0),!o.loading&&!o.lections.length?(n(),i("h1",U,"Zatiaľ neboli vytvorené žiadne lekcie")):r("",!0),s("div",Z,[(n(!0),i(m,null,A(o.lections,c=>(n(),i("div",{class:"column is-4",key:c.id},[_(u,{lection:c,onHandleDelete:p.deleteLection},null,8,["lection","onHandleDelete"])]))),128))])],64)}const J=g(I,[["render",q]]);export{J as default};
